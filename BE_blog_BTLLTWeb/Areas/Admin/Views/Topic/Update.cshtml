@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model BE_blog_BTLLTWeb.Models.Category

@{
    ViewData["Title"] = "Update";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container mt-5">
    <div class="current_page d-flex align-items-center mb-4">
        <i class="nav-icon fa-sharp fa-solid fa-tag me-2 fs-4"></i>
        <h2>Topic</h2>
    </div>
    <form asp-action="Update" asp-controller="Topic" asp-area="Admin" method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group mt-3 mb-3" style="opacity:0">
                <label for="id" class="control-label"></label>
                <input name="id" id="id" class="form-control" value="@Model.IdCategory"/>
            </div>
        <div class="form-group mt-3 mb-3">
                <label for="newname" class="control-label"></label>
            <input name="newname" id="newname" class="form-control" value="@Model.NameCategory" />
            </div>

        <div class="form-group mt-3 mb-3">
                <label for="image" class="control-label"></label>
                <input id="image" name="image" class="form-control" type="file"/>
        </div>
           <image id="img-preview" class="mt-3 mb-3" src="@Model.Img" width="200" height="200" />
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
   </div>
<div>
    <a asp-action="ListTopic"asp-controller="Topic" asp-area="Admin">Back to List</a>
</div>

@section update{
    <script>
        const imgInput = document.querySelector("#image");
        const imgPreview = document.querySelector("#img-preview");

        imgInput.addEventListener("change",(e)=>{
            const [file] = imgInput.files
            if (file) {
                imgPreview.src = URL.createObjectURL(file)
            }
        })
    </script>
}

